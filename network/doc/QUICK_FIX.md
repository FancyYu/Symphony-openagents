# ğŸš¨ å¿«é€Ÿä¿®å¤æŒ‡å—

## å½“å‰é—®é¢˜

```
ERROR: Agent daily-assistant already registered with network
```

## åŸå› 

ä¹‹å‰çš„ agent è¿›ç¨‹è™½ç„¶è¢«æ€æ‰äº†ï¼Œä½†ç½‘ç»œæœåŠ¡è¿˜æ²¡æœ‰æ³¨é”€å®ƒä»¬ã€‚ç½‘ç»œæœåŠ¡æœ‰ä¸€ä¸ª `agent_timeout` (é»˜è®¤ 180 ç§’)ï¼Œåœ¨è¿™ä¸ªæ—¶é—´å†…ä¼šä¿ç•™ agent çš„æ³¨å†Œä¿¡æ¯ã€‚

## ğŸ¯ è§£å†³æ–¹æ¡ˆï¼ˆ3 é€‰ 1ï¼‰

### æ–¹æ¡ˆ 1: ç­‰å¾…è‡ªåŠ¨æ¸…ç† â° (æ¨è)

```bash
# 1. åœæ­¢æ‰€æœ‰ agents
pkill -9 -f "openagents agent"
pkill -9 -f "python.*agent"

# 2. ç­‰å¾… 3 åˆ†é’Ÿè®©ç½‘ç»œæœåŠ¡è‡ªåŠ¨æ¸…ç†
sleep 180

# 3. é‡æ–°å¯åŠ¨
./clean_restart.sh
```

**ä¼˜ç‚¹**: ä¸éœ€è¦é‡å¯ç½‘ç»œæœåŠ¡  
**ç¼ºç‚¹**: éœ€è¦ç­‰å¾… 3 åˆ†é’Ÿ

---

### æ–¹æ¡ˆ 2: é‡å¯ç½‘ç»œæœåŠ¡ ğŸ”„ (æœ€å¿«)

```bash
# 1. åœæ­¢æ‰€æœ‰ agents
pkill -9 -f "openagents agent"
pkill -9 -f "python.*agent"

# 2. åœæ­¢ç½‘ç»œæœåŠ¡ (åœ¨ç½‘ç»œæœåŠ¡ç»ˆç«¯æŒ‰ Ctrl+C)

# 3. é‡æ–°å¯åŠ¨ç½‘ç»œæœåŠ¡
openagents network start .

# 4. ç­‰å¾…ç½‘ç»œæœåŠ¡å®Œå…¨å¯åŠ¨ (10ç§’)
sleep 10

# 5. å¯åŠ¨ agents
./clean_restart.sh
```

**ä¼˜ç‚¹**: æœ€å¿«ï¼Œç«‹å³æ¸…ç†æ‰€æœ‰æ³¨å†Œ  
**ç¼ºç‚¹**: éœ€è¦é‡å¯ç½‘ç»œæœåŠ¡

---

### æ–¹æ¡ˆ 3: ä½¿ç”¨ä¸åŒçš„ agent ID ğŸ†”

ä¿®æ”¹é…ç½®æ–‡ä»¶ä½¿ç”¨æ–°çš„ agent IDï¼š

```yaml
# configs/daily_assistant.yaml
agent_id: "daily-assistant-v2" # æ”¹ä¸ªåå­—
```

**ä¼˜ç‚¹**: å¯ä»¥ç«‹å³å¯åŠ¨  
**ç¼ºç‚¹**: æ²»æ ‡ä¸æ²»æœ¬ï¼Œä¸‹æ¬¡è¿˜ä¼šé‡åˆ°

---

## ğŸ” æ£€æŸ¥å½“å‰çŠ¶æ€

### æŸ¥çœ‹ç½‘ç»œä¸­æ³¨å†Œçš„ agents

```bash
# æ–¹æ³•1: æŸ¥çœ‹ç½‘ç»œæœåŠ¡æ—¥å¿—
# åœ¨ç½‘ç»œæœåŠ¡ç»ˆç«¯æŸ¥çœ‹è¾“å‡º

# æ–¹æ³•2: æ£€æŸ¥è¿›ç¨‹
ps aux | grep -E "daily-assistant|listener|analyst|creator"
```

### æŸ¥çœ‹ agent æ—¥å¿—

```bash
# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
tail -30 logs/æ—¥å¸¸åŠ©ç†.log | grep -E "ERROR|already registered|Failed"
```

---

## ğŸ“‹ å®Œæ•´çš„æ¸…ç†å’Œé‡å¯æµç¨‹

### æ­¥éª¤ 1: å®Œå…¨åœæ­¢

```bash
# åœæ­¢æ‰€æœ‰ agent è¿›ç¨‹
pkill -9 -f "openagents agent start"
pkill -9 -f "daily_assistant_listener"
pkill -9 -f "analyst_agent"
pkill -9 -f "creator_agent"

# ç¡®è®¤éƒ½åœæ­¢äº†
ps aux | grep -E "daily-assistant|listener|analyst|creator" | grep -v grep
# åº”è¯¥æ²¡æœ‰è¾“å‡º
```

### æ­¥éª¤ 2: é€‰æ‹©æ–¹æ¡ˆ

**å¦‚æœä¸æƒ³é‡å¯ç½‘ç»œæœåŠ¡**:

```bash
echo "ç­‰å¾… 3 åˆ†é’Ÿ..."
sleep 180
./clean_restart.sh
```

**å¦‚æœå¯ä»¥é‡å¯ç½‘ç»œæœåŠ¡** (æ¨è):

```bash
# åœ¨ç½‘ç»œæœåŠ¡ç»ˆç«¯æŒ‰ Ctrl+C
# ç„¶åé‡æ–°è¿è¡Œ
openagents network start .

# ç­‰å¾…å¯åŠ¨
sleep 10

# å¯åŠ¨ agents
./clean_restart.sh
```

---

## ğŸ¯ ä½¿ç”¨ clean_restart.sh

è¿™ä¸ªè„šæœ¬ä¼šï¼š

1. âœ… åœæ­¢æ‰€æœ‰è¿›ç¨‹
2. âœ… ç­‰å¾… 30 ç§’è®©ç½‘ç»œæ¸…ç†
3. âœ… æ£€æŸ¥ç¯å¢ƒå˜é‡
4. âœ… æŒ‰é¡ºåºå¯åŠ¨æ‰€æœ‰ agents
5. âœ… æ£€æµ‹ "already registered" é”™è¯¯
6. âœ… éªŒè¯æ¯ä¸ª agent æ˜¯å¦æˆåŠŸå¯åŠ¨

```bash
cd network
./clean_restart.sh
```

---

## âš ï¸ å¦‚æœè¿˜æ˜¯å¤±è´¥

### æ£€æŸ¥ 1: ç½‘ç»œæœåŠ¡æ˜¯å¦è¿è¡Œ

```bash
curl http://localhost:8700/api/health
```

åº”è¯¥è¿”å› JSON å“åº”ã€‚

### æ£€æŸ¥ 2: ç«¯å£æ˜¯å¦è¢«å ç”¨

```bash
lsof -i :8700
lsof -i :8600
```

### æ£€æŸ¥ 3: æŸ¥çœ‹å®Œæ•´æ—¥å¿—

```bash
# Daily Assistant
cat logs/æ—¥å¸¸åŠ©ç†.log

# Listener
cat logs/æ—¥å¸¸åŠ©ç†ç›‘å¬å™¨.log
```

---

## ğŸ”§ ç»ˆæè§£å†³æ–¹æ¡ˆ

å¦‚æœä»¥ä¸Šéƒ½ä¸è¡Œï¼Œå®Œå…¨é‡ç½®ï¼š

```bash
# 1. åœæ­¢æ‰€æœ‰
pkill -9 -f openagents
pkill -9 -f python

# 2. åœæ­¢ç½‘ç»œæœåŠ¡ (Ctrl+C)

# 3. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -rf /var/folders/*/T/openagents_*

# 4. é‡å¯ç½‘ç»œæœåŠ¡
openagents network start .

# 5. ç­‰å¾…å®Œå…¨å¯åŠ¨
sleep 15

# 6. å¯åŠ¨ agents
./clean_restart.sh
```

---

## ğŸ“Š éªŒè¯æˆåŠŸ

å¯åŠ¨æˆåŠŸååº”è¯¥çœ‹åˆ°ï¼š

```
âœ… æ—¥å¸¸åŠ©ç†å¯åŠ¨æˆåŠŸ
âœ… ç›‘å¬å™¨å¯åŠ¨æˆåŠŸ
âœ… åˆ†æå¸ˆå¯åŠ¨æˆåŠŸ
âœ… åˆ›ä½œè€…å¯åŠ¨æˆåŠŸ
```

ç„¶åï¼š

1. æ‰“å¼€ http://localhost:8700/studio/
2. ç™»å½• admin / admin
3. å‘é€æµ‹è¯•æ¶ˆæ¯
4. åº”è¯¥æ”¶åˆ°å›å¤

---

## ğŸ’¡ é¢„é˜²æªæ–½

### æ­£ç¡®çš„åœæ­¢æ–¹å¼

ä¸è¦ç›´æ¥ `kill -9`ï¼Œè€Œæ˜¯ï¼š

```bash
# åœ¨ start_symphony.py è¿è¡Œçš„ç»ˆç«¯æŒ‰ Ctrl+C
# å®ƒä¼šä¼˜é›…åœ°åœæ­¢æ‰€æœ‰ agents
```

### é¿å…é‡å¤å¯åŠ¨

å¯åŠ¨å‰å…ˆæ£€æŸ¥ï¼š

```bash
ps aux | grep -E "daily-assistant|listener|analyst|creator" | grep -v grep
```

å¦‚æœæœ‰è¾“å‡ºï¼Œè¯´æ˜å·²ç»åœ¨è¿è¡Œï¼Œä¸è¦é‡å¤å¯åŠ¨ã€‚

---

## ğŸ‰ æ€»ç»“

**æœ€å¿«çš„è§£å†³æ–¹æ¡ˆ**:

1. é‡å¯ç½‘ç»œæœåŠ¡
2. è¿è¡Œ `./clean_restart.sh`

**ä¸æƒ³é‡å¯ç½‘ç»œæœåŠ¡**:

1. åœæ­¢æ‰€æœ‰ agents
2. ç­‰å¾… 3 åˆ†é’Ÿ
3. è¿è¡Œ `./clean_restart.sh`
